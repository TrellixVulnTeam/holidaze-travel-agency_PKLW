{"ast":null,"code":"var _jsxFileName = \"/Users/zeidaradumihai/Desktop/holidaze/build/holidaze-travel-agency/src/components/admin/edit/AddAccommodationForm.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport ErrorMessage from \"../../../common/error/ErrorMessage\";\nimport useAxios from \"../../../hooks/useAxios\";\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport SelectPictures from \"../edit/media/SelectPictures\";\nimport Alert from \"react-bootstrap/Alert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  title: yup.string().required(\"Title is required\"),\n  sub_title: yup.string().required(\"Sub title is required\"),\n  location: yup.string().required(\"Sub title is required\"),\n  price: yup.number().typeError(\"Price is required\").required(\"Price is required\"),\n  image: yup.string().required(\"Image is required\"),\n  alt: yup.string().required(\"Image is required\"),\n  metaTitle: yup.string().required(\"Image is required\"),\n  metaDescription: yup.string().required(\"Image is required\"),\n  keywords: yup.string().required(\"Keywords is required\")\n});\nexport default function AddPost() {\n  _s();\n\n  const [submitting, setSubmitting] = useState(false);\n  const [serverError, setServerError] = useState(null);\n  const history = useHistory();\n  const http = useAxios();\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  async function onSubmit(data) {\n    setSubmitting(true);\n    setServerError(null);\n    data.status = \"publish\";\n\n    if (data.featured_media === \"\") {\n      data.featured_media = null;\n    }\n\n    console.log(data);\n\n    try {\n      const response = await http.post(\"/accommodations\", data);\n      console.log(\"response\", response.data);\n      history.push(\"/accommodations\");\n    } catch (error) {\n      console.log(\"error\", error);\n      setServerError(error.toString());\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: handleSubmit(onSubmit),\n    children: [serverError && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      className: \"error-alert\",\n      children: [\"An Error occurred, please refresh the page and try again. \", /*#__PURE__*/_jsxDEV(\"b\", {\n        className: \"error-b\",\n        children: \"Error description:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 127\n      }, this), \" \", serverError]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n        name: \"title\",\n        placeholder: \"Title\",\n        ref: register,\n        className: \"form_control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 5\n      }, this), errors.title && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: errors.title.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n        name: \"sub_title\",\n        placeholder: \"Sub title\",\n        ref: register,\n        className: \"form_control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 5\n      }, this), errors.sub_title && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: errors.sub_title.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n        name: \"location\",\n        placeholder: \"Location\",\n        ref: register,\n        className: \"form_control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 5\n      }, this), errors.location && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: errors.location.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n        name: \"price\",\n        type: \"number\",\n        placeholder: \"Price per night\",\n        ref: register,\n        className: \"form_control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this), errors.price && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: errors.price.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: /*#__PURE__*/_jsxDEV(Form.Control, {\n        name: \"description\",\n        placeholder: \"Description\",\n        ref: register,\n        className: \"form_control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n        name: \"amenities\",\n        placeholder: \"Amenities\",\n        ref: register,\n        className: \"form_control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }, this), errors.amenities && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: errors.amenities.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: [/*#__PURE__*/_jsxDEV(SelectPictures, {\n        register: register,\n        className: \"form_control-img\",\n        name: \"image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }, this), errors.image && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: errors.image.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n        name: \"alt\",\n        placeholder: \"Image alt\",\n        ref: register,\n        className: \"form_control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }, this), errors.alt && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: errors.alt.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n        name: \"metaTitle\",\n        placeholder: \"Meta title\",\n        ref: register,\n        className: \"form_control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 5\n      }, this), errors.metaTitle && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: errors.metaTitle.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n        name: \"metaDescription\",\n        placeholder: \"Meta description\",\n        ref: register,\n        className: \"form_control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 5\n      }, this), errors.metaDescription && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: errors.metaDescription.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 34\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n        name: \"keywords\",\n        placeholder: \"Keywords\",\n        ref: register,\n        className: \"form_control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 5\n      }, this), errors.keywords && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        children: errors.keywords.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      className: \"button\",\n      type: \"submit\",\n      children: submitting ? \"Submitting...\" : \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 4\n  }, this);\n}\n\n_s(AddPost, \"TGwzNfjMiR9jysCc8K/T8s/iI/4=\", false, function () {\n  return [useHistory, useAxios, useForm];\n});\n\n_c = AddPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddPost\");","map":{"version":3,"sources":["/Users/zeidaradumihai/Desktop/holidaze/build/holidaze-travel-agency/src/components/admin/edit/AddAccommodationForm.js"],"names":["useState","useHistory","useForm","yup","yupResolver","ErrorMessage","useAxios","Form","Button","SelectPictures","Alert","schema","object","shape","title","string","required","sub_title","location","price","number","typeError","image","alt","metaTitle","metaDescription","keywords","AddPost","submitting","setSubmitting","serverError","setServerError","history","http","register","handleSubmit","errors","resolver","onSubmit","data","status","featured_media","console","log","response","post","push","error","toString","message","amenities"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport ErrorMessage from \"../../../common/error/ErrorMessage\";\nimport useAxios from \"../../../hooks/useAxios\";\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport SelectPictures from \"../edit/media/SelectPictures\";\nimport Alert from \"react-bootstrap/Alert\";\n\n\nconst schema = yup.object().shape({\n\ttitle: yup.string().required(\"Title is required\"),\n\tsub_title: yup.string().required(\"Sub title is required\"),\n\tlocation: yup.string().required(\"Sub title is required\"),\n\tprice: yup.number().typeError(\"Price is required\").required(\"Price is required\"),\n\timage: yup.string().required(\"Image is required\"),\n\talt:yup.string().required(\"Image is required\"),\n\tmetaTitle:yup.string().required(\"Image is required\"),\n\tmetaDescription:yup.string().required(\"Image is required\"),\n\tkeywords:yup.string().required(\"Keywords is required\"),\n});\n\nexport default function AddPost() {\n\tconst [submitting, setSubmitting] = useState(false);\n\tconst [serverError, setServerError] = useState(null);\n\n\tconst history = useHistory();\n\tconst http = useAxios();\n\n\tconst { register, handleSubmit, errors } = useForm({\n\t\tresolver: yupResolver(schema),\n\t});\n\n\tasync function onSubmit(data) {\n\t\tsetSubmitting(true);\n\t\tsetServerError(null);\n\n\t\tdata.status = \"publish\";\n\n\t\tif (data.featured_media === \"\") {\n\t\t\tdata.featured_media = null;\n\t\t}\n\n\t\tconsole.log(data);\n\n\t\ttry {\n\t\t\tconst response = await http.post(\"/accommodations\", data);\n\t\t\tconsole.log(\"response\", response.data);\n\t\t\thistory.push(\"/accommodations\");\n\n\t\t} catch (error) {\n\t\t\tconsole.log(\"error\", error);\n\t\t\tsetServerError(error.toString());\n\t\t\t\n\t\t} finally {\n\t\t\tsetSubmitting(false);\n\t\t}\n\t}\n\n\treturn (\n\t\t\n\t\t\t<Form onSubmit={handleSubmit(onSubmit)}>\n\t\t\t\t{serverError && <Alert variant=\"danger\" className=\"error-alert\">An Error occurred, please refresh the page and try again. <b className=\"error-b\">Error description:</b> {serverError}</Alert>}\n\t\t\t\t\n\t\t\t\t<Form.Group>\n\t\t\t\t<Form.Control name=\"title\" placeholder=\"Title\" ref={register} className=\"form_control\"/>\n\t\t\t\t\t\t{errors.title && <ErrorMessage>{errors.title.message}</ErrorMessage>}\n\t\t\t\t</Form.Group>\n\n\t\t\t\t<Form.Group>\n\t\t\t\t<Form.Control name=\"sub_title\" placeholder=\"Sub title\" ref={register} className=\"form_control\"/>\n\t\t\t\t\t\t{errors.sub_title && <ErrorMessage>{errors.sub_title.message}</ErrorMessage>}\n\t\t\t\t</Form.Group>\n\n\t\t\t\t<Form.Group>\n\t\t\t\t<Form.Control name=\"location\" placeholder=\"Location\" ref={register} className=\"form_control\"/>\n\t\t\t\t\t\t{errors.location && <ErrorMessage>{errors.location.message}</ErrorMessage>}\n\t\t\t\t</Form.Group>\n\n\t\t\t\t<Form.Group>\n\t\t\t\t<Form.Control name=\"price\" type=\"number\"  placeholder=\"Price per night\" ref={register} className=\"form_control\"/>\n\t\t\t\t\t\t{errors.price && <ErrorMessage>{errors.price.message}</ErrorMessage>}\n\t\t\t\t</Form.Group>\n\n\t\t\t\t<Form.Group>\n\t\t\t\t<Form.Control name=\"description\" placeholder=\"Description\" ref={register} className=\"form_control\"/>\n\t\t\t\t</Form.Group>\n\n\t\t\t\t<Form.Group>\n\t\t\t\t<Form.Control  name=\"amenities\" placeholder=\"Amenities\" ref={register} className=\"form_control\"/>\n\t\t\t\t\t\t{errors.amenities && <ErrorMessage>{errors.amenities.message}</ErrorMessage>}\n\t\t\t\t</Form.Group>\n\n\t\t\t\t<Form.Group>\n\t\t\t\t<SelectPictures register={register} className=\"form_control-img\" name=\"image\"/>\n\t\t\t\t{errors.image && <ErrorMessage>{errors.image.message}</ErrorMessage>}\n\t\t\t\t</Form.Group>\n\n\t\t\t\t<Form.Group>\n\t\t\t\t<Form.Control  name=\"alt\" placeholder=\"Image alt\" ref={register} className=\"form_control\"/>\n\t\t\t\t\t\t{errors.alt && <ErrorMessage>{errors.alt.message}</ErrorMessage>}\n\t\t\t\t</Form.Group>\n\n\t\t\t\t<Form.Group>\n\t\t\t\t<Form.Control  name=\"metaTitle\" placeholder=\"Meta title\" ref={register} className=\"form_control\"/>\n\t\t\t\t\t\t{errors.metaTitle && <ErrorMessage>{errors.metaTitle.message}</ErrorMessage>}\n\t\t\t\t</Form.Group>\n\n\t\t\t\t<Form.Group>\n\t\t\t\t<Form.Control  name=\"metaDescription\" placeholder=\"Meta description\" ref={register} className=\"form_control\"/>\n\t\t\t\t\t\t{errors.metaDescription && <ErrorMessage>{errors.metaDescription.message}</ErrorMessage>}\n\t\t\t\t</Form.Group>\n\n\t\t\t\t<Form.Group>\n\t\t\t\t<Form.Control name=\"keywords\" placeholder=\"Keywords\" ref={register} className=\"form_control\"/>\n\t\t\t\t\t\t{errors.keywords && <ErrorMessage>{errors.keywords.message}</ErrorMessage>}\n\t\t\t\t</Form.Group>\n\n\n\t\t\t\t\n\t\t\t\t<Button className=\"button\" type=\"submit\">{submitting ? \"Submitting...\" : \"Submit\"}</Button>\n\t\t\t\n\t\t\t</Form>\n\t\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}