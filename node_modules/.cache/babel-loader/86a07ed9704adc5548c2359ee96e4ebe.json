{"ast":null,"code":"var _jsxFileName = \"/Users/zeidaradumihai/Desktop/holidaze/build/holidaze-travel-agency/src/components/visitor/contact/FormContact.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport Container from \"react-bootstrap/Container\";\nimport Confirmation from \"../../../common/Confirmation\";\nimport { BASE_URL } from \"../../../constants/Api\";\nimport axios from \"axios\";\nimport ErrorMessage from \"../../../common/error/ErrorMessage\";\nimport Loading from \"../../../common/Loading\";\nimport Alert from \"react-bootstrap/Alert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  fullname: yup.string().required(\"Please enter a name\").min(1, \"Name must be at least 3 characters\"),\n  email: yup.string().email(\"Please enter a valid email address\").required(\"Required a valid email address. Example 'email@hotmail.com\"),\n  message: yup.string().required(\"Please enter a message\").min(1)\n});\n\nfunction FormContact() {\n  _s();\n\n  const [submitted, setSubmitted] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [serverError, setServerError] = useState(null);\n  const url = BASE_URL + `/contacts`;\n  console.log(url);\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  async function onSubmit(data) {\n    setSubmitted(true);\n    setSubmitting(true);\n    setServerError(null);\n\n    try {\n      const response = await axios.post(url, data);\n      console.log(\"response\", response.data);\n    } catch (error) {\n      console.log(\"error\", error);\n      setServerError(error.toString());\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  console.log(serverError);\n\n  if (submitting) {\n    return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 12\n    }, this);\n  }\n\n  if (serverError) {\n    return /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      className: \"error-alert\",\n      children: [\"An Error occurred, please refresh the page and try again. \", /*#__PURE__*/_jsxDEV(\"b\", {\n        className: \"error-b\",\n        children: \"Error description:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 118\n      }, this), \" \", serverError]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit(onSubmit),\n      children: [submitted && /*#__PURE__*/_jsxDEV(Confirmation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        disabled: submitting,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            name: \"fullname\",\n            placeholder: \"Your name\",\n            ref: register(),\n            className: \"form_control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 21\n          }, this), errors.fullname && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            children: errors.fullname.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"email\",\n            name: \"email\",\n            placeholder: \"Email address\",\n            ref: register(),\n            className: \"form_control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this), errors.email && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            children: errors.email.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            as: \"textarea\",\n            rows: \"3\",\n            name: \"message\",\n            placeholder: \"Your message\",\n            ref: register(),\n            className: \"form_control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this), errors.message && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            children: errors.message.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 36\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"info\",\n          type: \"submit\",\n          className: \"button btn-form\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n\n_s(FormContact, \"oXYQozA6ly3Q533IdDImpLKPdqY=\", false, function () {\n  return [useForm];\n});\n\n_c = FormContact;\nexport default FormContact;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormContact\");","map":{"version":3,"sources":["/Users/zeidaradumihai/Desktop/holidaze/build/holidaze-travel-agency/src/components/visitor/contact/FormContact.js"],"names":["useState","useForm","yup","yupResolver","Form","Button","Container","Confirmation","BASE_URL","axios","ErrorMessage","Loading","Alert","schema","object","shape","fullname","string","required","min","email","message","FormContact","submitted","setSubmitted","submitting","setSubmitting","serverError","setServerError","url","console","log","register","handleSubmit","formState","errors","resolver","onSubmit","data","response","post","error","toString"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport Container from \"react-bootstrap/Container\";\nimport Confirmation from \"../../../common/Confirmation\";\nimport { BASE_URL } from \"../../../constants/Api\";\nimport axios from \"axios\";\nimport ErrorMessage from \"../../../common/error/ErrorMessage\";\nimport Loading from \"../../../common/Loading\";\nimport Alert from \"react-bootstrap/Alert\";\n\n\n\nconst schema = yup.object().shape({\n  fullname: yup.string().required(\"Please enter a name\").min(1, \"Name must be at least 3 characters\"),\n  email: yup\n  .string()\n  .email(\"Please enter a valid email address\")\n  .required(\"Required a valid email address. Example 'email@hotmail.com\"),\n  message: yup.string().required(\"Please enter a message\").min(1),\n});\n\nfunction FormContact() {\n  const [submitted, setSubmitted] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [serverError, setServerError] = useState(null);\n\n  \n\n  const url = BASE_URL + `/contacts`;\n\nconsole.log(url);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  async function onSubmit(data) {\n    setSubmitted(true);\n    setSubmitting(true);\n    setServerError(null);\n\n    try {\n      const response = await axios.post(url, data);\n      console.log(\"response\", response.data);\n      \n      \n    } catch (error) {\n      console.log(\"error\", error);\n      setServerError(error.toString());\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  console.log(serverError);\n\n  if (submitting) {\n    return <Loading />;\n  }\n\n  if (serverError) {\n    return <Alert variant=\"danger\" className=\"error-alert\">An Error occurred, please refresh the page and try again. <b className=\"error-b\">Error description:</b> {serverError}</Alert>;\n  }\n\n  return (\n    <Container>\n      \n      <Form onSubmit={handleSubmit(onSubmit)}>\n      {submitted && <Confirmation />}  \n\n        <fieldset disabled={submitting}>\n\n              <Form.Group>\n                   \n                    <Form.Control type=\"text\" name=\"fullname\" placeholder=\"Your name\" ref={register()} className=\"form_control\" />\n                    {errors.fullname && <ErrorMessage>{errors.fullname.message}</ErrorMessage>}\n                </Form.Group>\n                <Form.Group>\n                \n                <Form.Control type=\"email\" name=\"email\" placeholder=\"Email address\" ref={register()} className=\"form_control\"/>\n                {errors.email && <ErrorMessage>{errors.email.message}</ErrorMessage>}\n            </Form.Group>\n\n            <Form.Group>\n                \n                <Form.Control type=\"text\" as=\"textarea\" rows=\"3\" name=\"message\" placeholder=\"Your message\" ref={register()} className=\"form_control\"/>\n                {errors.message && <ErrorMessage>{errors.message.message}</ErrorMessage>}\n            </Form.Group>\n\n          <Button variant=\"info\" type=\"submit\" className=\"button btn-form\">\n            Send\n          </Button>\n        </fieldset>\n      </Form>\n    </Container>\n  );\n}\n\nexport default FormContact;"]},"metadata":{},"sourceType":"module"}