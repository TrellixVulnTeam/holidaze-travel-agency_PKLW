{"ast":null,"code":"var _jsxFileName = \"/Users/zeidaradumihai/Desktop/holidaze/build/holidaze-travel-agency/src/components/visitor/enquire/FormEnquires.js\",\n    _s2 = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport Container from \"react-bootstrap/Container\";\nimport Confirmation from \"../../../common/Confirmation\";\nimport { BASE_URL } from \"../../../constants/Api\";\nimport axios from \"axios\";\nimport ErrorMessage from \"../../../common/error/ErrorMessage\";\nimport Loading from \"../../../common/Loading\";\nimport { useLocation } from \"react-router-dom\";\nimport Alert from \"react-bootstrap/Alert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst today = new Date();\ntoday.setHours(0, 0, 0, 0); // Create new Date instance\n\nconst dateMin = new Date(); // Add a day\n\ndateMin.setDate(dateMin.getDate() + 1);\nconst schema = yup.object().shape({\n  fullname: yup.string().required(\"Please enter a name\").min(1, \"Name must be at least 3 characters\"),\n  email: yup.string().email(\"Please enter a valid email address\").required(\"Required a valid email address. Example 'email@hotmail.com\"),\n  special_requests: yup.string(),\n  guest_number: yup.number().typeError(\"Please select a number of guests\").min(0, 'Min value 0.'),\n  checkIn: yup.date().nullable().typeError('Invalid Date').required(\"Please select your arrival\").min(today, 'select min current day'),\n  checkOut: yup.date().nullable().typeError('Invalid Date').required(\"Please select your departure\").min(dateMin, \"Departure can't be before arrival date\")\n});\n\nfunction FormEnquire() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [submitted, setSubmitted] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [serverError, setServerError] = useState(null);\n\n  function useQuery() {\n    _s();\n\n    return new URLSearchParams(useLocation().search);\n  }\n\n  _s(useQuery, \"EuD9q2dZ34PfN/QO2OBhBzeMxmY=\", false, function () {\n    return [useLocation];\n  });\n\n  let query = useQuery();\n  const url = BASE_URL + `/enquires`; // console.log(url);\n\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  async function onSubmit(data) {\n    data = { ...data,\n      ...{\n        acommodationTitle: query.get(\"accomodation\")\n      }\n    };\n    setSubmitted(true);\n    setSubmitting(true);\n    setServerError(null);\n\n    try {\n      const response = await axios.post(url, data);\n      console.log(\"response\", response.data);\n    } catch (error) {\n      console.log(\"error\", error);\n      setServerError(error.toString());\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  console.log(serverError);\n\n  if (submitting) {\n    return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 12\n    }, this);\n  }\n\n  if (serverError) {\n    return /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      className: \"error-alert\",\n      children: [\"An Error occurred, please refresh the page and try again. \", /*#__PURE__*/_jsxDEV(\"b\", {\n        className: \"error-b\",\n        children: \"Error description:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 118\n      }, this), \" \", serverError]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit(onSubmit),\n      children: [submitted && /*#__PURE__*/_jsxDEV(Confirmation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        disabled: submitting,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"form-label\",\n            children: \"Your name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            name: \"fullname\",\n            placeholder: \"Name\",\n            ref: register(),\n            className: \"form_control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), errors.fullname && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            children: errors.fullname.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"form-label\",\n            children: \"Email adress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"email\",\n            name: \"email\",\n            placeholder: \"Email address\",\n            ref: register(),\n            className: \"form_control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), errors.email && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            children: errors.email.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"form-label\",\n            children: \"Arrival date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            placeholder: \"format date: mm/dd/yyyy\",\n            name: \"checkIn\",\n            type: \"date\",\n            ref: register(),\n            className: \"form_control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), errors.checkIn && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            children: errors.checkIn.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"form-label\",\n            children: \"Departue date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            placeholder: \"format date: mm/dd/yyyy\",\n            name: \"checkOut\",\n            type: \"date\",\n            ref: register(),\n            className: \"form_control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), errors.checkOut && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            children: errors.checkOut.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n            name: \"accomodation\",\n            type: \"hidden\",\n            className: \"form_control\",\n            ref: register(),\n            value: query.get(\"accomodation\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), errors.accomodation && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            children: errors.accomodation.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n            name: \"guest_number\",\n            as: \"select\",\n            className: \"form_control\",\n            ref: register(),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"default\",\n              children: \"Select number of guests\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1\",\n              children: \"1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"2\",\n              children: \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"3\",\n              children: \"3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"4\",\n              children: \"4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this), errors.guest_number && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            children: errors.guest_number.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            as: \"textarea\",\n            rows: \"4\",\n            name: \"special_requests\",\n            placeholder: \"Special requests\",\n            ref: register(),\n            className: \"form_control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this), errors.special_requests && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            children: errors.special_requests.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"info\",\n          type: \"submit\",\n          className: \"button btn-form\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(FormEnquire, \"gr2f1wOEdBbgAbYQVM92XvIrGog=\", false, function () {\n  return [useQuery, useForm];\n});\n\n_c = FormEnquire;\nexport default FormEnquire;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormEnquire\");","map":{"version":3,"sources":["/Users/zeidaradumihai/Desktop/holidaze/build/holidaze-travel-agency/src/components/visitor/enquire/FormEnquires.js"],"names":["useState","useForm","yup","yupResolver","Form","Button","Container","Confirmation","BASE_URL","axios","ErrorMessage","Loading","useLocation","Alert","today","Date","setHours","dateMin","setDate","getDate","schema","object","shape","fullname","string","required","min","email","special_requests","guest_number","number","typeError","checkIn","date","nullable","checkOut","FormEnquire","submitted","setSubmitted","submitting","setSubmitting","serverError","setServerError","useQuery","URLSearchParams","search","query","url","register","handleSubmit","formState","errors","resolver","onSubmit","data","acommodationTitle","get","response","post","console","log","error","toString","message","accomodation"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport Container from \"react-bootstrap/Container\";\nimport Confirmation from \"../../../common/Confirmation\";\nimport { BASE_URL } from \"../../../constants/Api\";\nimport axios from \"axios\";\nimport ErrorMessage from \"../../../common/error/ErrorMessage\";\nimport Loading from \"../../../common/Loading\";\nimport { useLocation } from \"react-router-dom\";\nimport Alert from \"react-bootstrap/Alert\";\n\n\nconst today = new Date();\ntoday.setHours(0, 0, 0, 0);\n\n// Create new Date instance\nconst dateMin = new Date();\n\n// Add a day\ndateMin.setDate(dateMin.getDate() + 1);\n\nconst schema = yup.object().shape({\n  fullname: yup\n    .string()\n    .required(\"Please enter a name\")\n    .min(1, \"Name must be at least 3 characters\"),\n  email: yup\n    .string()\n    .email(\"Please enter a valid email address\")\n    .required(\"Required a valid email address. Example 'email@hotmail.com\"),\n  special_requests: yup.string(),\n  guest_number: yup\n  .number()\n  .typeError(\"Please select a number of guests\")\n  .min(0, 'Min value 0.'),\n  checkIn: yup\n  .date()\n  .nullable()\n  .typeError('Invalid Date')\n  .required(\"Please select your arrival\")\n  .min(today, 'select min current day'),\n  checkOut: yup\n  .date()\n  .nullable()\n  .typeError('Invalid Date')\n  .required(\"Please select your departure\")\n  .min(\n    dateMin,\n    \"Departure can't be before arrival date\"\n)\n});\n\nfunction FormEnquire() {\n  const [submitted, setSubmitted] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [serverError, setServerError] = useState(null);\n\n  function useQuery() {\n    return new URLSearchParams(useLocation().search);\n  }\n\n  let query = useQuery();\n\n  const url = BASE_URL + `/enquires`;\n\n  // console.log(url);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  async function onSubmit(data) {\n    data = { ...data, ...{ acommodationTitle: query.get(\"accomodation\") } };\n\n    setSubmitted(true);\n    setSubmitting(true);\n    setServerError(null);\n\n    try {\n      const response = await axios.post(url, data);\n      console.log(\"response\", response.data);\n    } catch (error) {\n      console.log(\"error\", error);\n      setServerError(error.toString());\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  console.log(serverError);\n\n  if (submitting) {\n    return <Loading />;\n  }\n\n  if (serverError) {\n    return <Alert variant=\"danger\" className=\"error-alert\">An Error occurred, please refresh the page and try again. <b className=\"error-b\">Error description:</b> {serverError}</Alert>;\n  }\n\n  return (\n    <Container>\n      <Form onSubmit={handleSubmit(onSubmit)}>\n        {submitted && <Confirmation />}\n        <fieldset disabled={submitting}>\n\n          <Form.Group>\n          <Form.Label className=\"form-label\">Your name</Form.Label>\n            <Form.Control\n              type=\"text\"\n              name=\"fullname\"\n              placeholder=\"Name\"\n              ref={register()}\n              className=\"form_control\"\n            />\n            {errors.fullname && (\n              <ErrorMessage>{errors.fullname.message}</ErrorMessage>\n            )}\n          </Form.Group>\n\n          <Form.Group>\n          <Form.Label className=\"form-label\">Email adress</Form.Label>\n            <Form.Control\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Email address\"\n              ref={register()}\n              className=\"form_control\"\n            />\n            {errors.email && (\n              <ErrorMessage>{errors.email.message}</ErrorMessage>\n            )}\n          </Form.Group>\n\n          <Form.Group>\n          <Form.Label className=\"form-label\">Arrival date</Form.Label>\n            <Form.Control\n              placeholder=\"format date: mm/dd/yyyy\"\n              name=\"checkIn\"\n              type=\"date\"\n              ref={register()}\n              className=\"form_control\"\n            />\n            {errors.checkIn && (\n              <ErrorMessage>{errors.checkIn.message}</ErrorMessage>\n            )}\n          </Form.Group>\n\n          <Form.Group>\n          <Form.Label className=\"form-label\">Departue date</Form.Label>\n            <Form.Control\n              placeholder=\"format date: mm/dd/yyyy\"\n              name=\"checkOut\"\n              type=\"date\"\n              ref={register()}\n              className=\"form_control\"\n            />\n            {errors.checkOut && (\n              <ErrorMessage>{errors.checkOut.message}</ErrorMessage>\n            )}\n          </Form.Group>\n\n          <Form.Group>\n\n            <Form.Control\n              name=\"accomodation\"\n              type=\"hidden\"\n              className=\"form_control\"\n              ref={register()}\n              value={query.get(\"accomodation\")}\n            />\n            {errors.accomodation && (\n              <ErrorMessage>{errors.accomodation.message}</ErrorMessage>\n            )}\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Control\n              name=\"guest_number\"\n              as=\"select\" \n              className=\"form_control\"\n              ref={register()}\n            >\n            <option value=\"default\">Select number of guests</option>\n                                    <option value=\"1\">1</option>\n                                    <option value=\"2\">2</option>\n                                    <option value=\"3\">3</option>\n                                    <option value=\"4\">4</option>\n            </Form.Control>\n            {errors.guest_number && (\n              <ErrorMessage>{errors.guest_number.message}</ErrorMessage>\n            )}\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Control\n              type=\"text\"\n              as=\"textarea\"\n              rows=\"4\"\n              name=\"special_requests\"\n              placeholder=\"Special requests\"\n              ref={register()}\n              className=\"form_control\"\n            />\n            {errors.special_requests && (\n              <ErrorMessage>{errors.special_requests.message}</ErrorMessage>\n            )}\n          </Form.Group>\n\n          <Button variant=\"info\" type=\"submit\" className=\"button btn-form\">\n            Send\n          </Button>\n        </fieldset>\n      </Form>\n    </Container>\n  );\n}\n\nexport default FormEnquire;"]},"metadata":{},"sourceType":"module"}